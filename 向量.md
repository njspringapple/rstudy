
## 定义
    
向量是包含**一个或多个相同数据类型值**的对象。

## 创建
    
- 使用函数 `c()`（combine）将多个值组合成一个向量。
- **注意：** 前面提到的对象（如 `x <- 8`）是向量的特殊情况（长度为 1 的向量）

```
# 长度为 1 的向量
x <- 8

# 长度为 6 的向量（例如 6 位朋友的身高）
v <- c(175, 190, 205, 155, 180, 190)
v
## [1] 175 190 205 155 180 190
```

## 向量操作

- **向量的操作：**  
    在 R 中，可以像操作**“变量”**一样操作向量（因为变量实际上是长度为 1 的向量）。
    
- **向量运算：**  
    可以对向量进行计算，并将结果存储在对象中。
    
- **对象覆盖：**  
    包含向量的对象可以随时被新值覆盖。

```
# 六位朋友的身高
v <- c(175, 190, 205, 155, 180, 190)

# 所有朋友都长高了 2 厘米
v + 2
## [1] 177 192 207 157 182 192

# 将计算结果存储到一个新对象
v2 <- v + 2
v2
## [1] 177 192 207 157 182 192

# 覆盖原始对象
v <- v + 2
v
## [1] 177 192 207 157 182 192
```

## **循环规则（Recycling）**


- **循环规则（Recycling）：** 当两个向量长度不一致时，R 会将较短的向量**循环**以匹配较长向量的长度。这种机制使得向量运算更加简洁和灵活。
- **注意事项：** 如果较长向量的长度不是较短向量长度的整数倍，R 会发出警告，但仍然执行运算。

```
> v <- c(175, 190, 205, 155, 180, 190)
> v + c(1,2)
[1] 176 192 206 157 181 192

> v <- c(175, 190, 205, 155, 180, 190,111)
> v + c(1,2)
[1] 176 192 206 157 181 192 112
警告信息:
In v + c(1, 2) : 长的对象长度不是短的对象长度的整倍数
```

## 向量的索引（过滤）

有时我们希望访问向量中的**单个元素**或特定位置的值。在 R 中，可以使用**方括号 `[ ]`** 来实现索引操作。

**向量索引规则：**

- 使用 `向量名[位置]` 的方式访问元素
- 位置（索引）从 **1** 开始（R 是基于 1 的索引）        **# Python中从0开始，要注意！！！！**
- 除了可以取1个元素，也可以取多个元素、连续的多个元素

```
# 首先，正确命名对象
heights <- c(175, 190, 205, 155, 180, 190)

# 访问第 3 个朋友的身高
heights[3]
## [1] 205

# 访问第 5 个朋友的身高
heights[5]
## [1] 180

# 访问第 3 个和第 5 个朋友的身高 
heights[c(3, 5)] 
## [1] 205 180

# 访问第 3 到第 5 个朋友的身高 
heights[3:5] 
## [1] 205 155 180

```

## 向量的负索引（删除）

在 R 中，可以使用**负索引**来访问向量的子集，或者通过删除特定元素来生成新的向量

```
# 删除第 1 个元素（返回除第 1 个元素外的所有值）
heights[-1]
## [1] 190 205 155 180 190

# 删除第 1、3 和第 6 个元素
heights[-c(1, 3, 6)]
## [1] 190 155 180

# 删除第 3 到第 5 个元素
heights[-(3:5)]
## [1] 175 190 190

# 删除后赋值

# 删除第 6 个元素
heights <- heights[-6]

# heights 现在只包含 5 个元素
heights
## [1] 175 190 205 155 180
```

## 向量值的修改

索引不仅可以用于访问向量中的元素，还可以用于**修改**向量中的值

```
# 创建一个副本
heights2 <- heights 

# 查看第 3 个元素
heights2[3]
## [1] 205

# 修改第 3 个元素的值为 207
heights2[3] <- 207

# 再次查看第 3 个元素
heights2[3]
## [1] 207

# 修改第 1、3 和第 6 个元素
heights2[c(1, 3, 6)] <- c(176, 207, 191)

# 查看修改后的 heights2
heights2
## [1] 176 190 207 155 180 191

# 原始向量 heights 不受影响
heights
## [1] 175 190 205 155 180
```

## 命名向量(枚举)

在 R 中，可以创建**命名向量**（Named Vectors），为向量中的每个元素赋予具体的名称。这些名称帮助更清晰地描述向量中的值，而不是单纯依赖索引位置。

- **命名向量提供了更直观的输出，因为每个值都带有对应的名称**
- **命名向量使数据更易于理解，特别是在处理有意义的键值对（如人名和对应的数值）时**
- **它不仅提升了可读性，还能帮助区分重复值背后的实际意义**

```
# 创建一个命名向量
heights <- c(Lisa = 175, Scottie = 190, Mike = 205, Julia = 155, 
             Patrick = 180, John = 190)

# 查看向量
heights
## Lisa    Scottie   Mike    Julia    Patrick   John 
## 175     190       205     155      180       190
```

## 命名向量的计算与索引

在 R 中，命名向量不仅可以像普通向量一样进行计算和索引操作，还可以通过元素的**名称**来进行索引，这使得数据操作更加直观和灵活

```
# 对命名向量的每个元素加 2
heights + 2
## Lisa    Scottie   Mike    Julia    Patrick   John 
## 177     192       207     157      182       192

# 提取第 3 到第 5 个元素
heights[3:5]
## Mike    Julia    Patrick 
## 205     155      180

# 提取第 1、3 和第 6 个元素
heights[c(1, 3, 6)]
## Lisa    Mike    John 
## 175     205     190

# 通过名称提取元素
heights[c("Lisa", "Mike", "John")]
## Lisa    Mike    John 
## 175     205     190
```

## 逻辑运算符

- 逻辑运算符用于比较两个值的大小关系
- 返回值是布尔值 `TRUE` 或 `FALSE`，表示比较的结果是否成立
- 使用这些运算符可以轻松实现条件判断和逻辑控制

```
# 等于 ==
3 == 5 
## [1] FALSE

3 == 3 
## [1] TRUE

# 小于 <
3 < 5 
## [1] TRUE

# 大于 >
3 > 5 
## [1] FALSE

# 小于等于 <=
3 <= 5 
## [1] TRUE

# 大于等于 >=
3 >= 5 
## [1] FALSE
```

- **逻辑运算符会生成逻辑向量，其结果是布尔值 `TRUE` 或 `FALSE`，表示每个元素是否满足某个条件**
- **逻辑向量可以被赋值给对象，也可以作为索引使用**
- **这是 R 中处理和过滤数据的一种核心方式**

```
# 检查哪些身高大于 200
heights > 200
## Lisa    Scottie   Mike    Julia    Patrick   John 
## FALSE   FALSE     TRUE    FALSE    FALSE     FALSE

# 创建一个逻辑向量，表示身高是否大于 200
greater_than_2m <- heights > 200

# 查看逻辑向量
greater_than_2m
## Lisa    Scottie   Mike    Julia    Patrick   John 
## FALSE   FALSE     TRUE    FALSE    FALSE     FALSE

# 使用逻辑向量索引，选出身高大于 200 的元素
heights[greater_than_2m]
## Mike 
## 205
```

## 向量和数据类型

在 R 中，**向量**是用于存储数据的基本结构（标量在 R 中被视为长度为 1 的向量）。  
复杂的数据结构（例如因子、列表、矩阵、数据框等）通常由向量组成。

## 向量的特点

- 一个向量中的**所有元素必须具有相同的数据类型**（英文称为 **mode** 或 **data type**）。
- 向量是 R 中数据处理的核心单元。

## 重要的数据类型

1. **`numeric, integer`**
    - 存储整数。
    - 例：`1, 2, 3`。
2. **`numeric, double`**
    - 存储浮点数（小数或带小数点的数）。
    - 例：`1.5, 3.14, -2.7`。
3. **`character`**
    - 存储字符串（文本或字符序列）。
    - 例：`"Hello"`, `"R"`。
4. **`logical`**
    - 存储布尔值（逻辑值）。
    - 例：`TRUE`, `FALSE`。

- 默认情况下，数字是浮点数（Gleitkommazahlen）
- 如果需要将数字存储为**整数类型**（`integer`），必须显式地定义：通过附加 `L` 或使用特定函数来定义整数类型
- 使用 `typeof()` 函数可以检查对象的内部数据类型

```
# 创建一个数值向量
heights <- c(175, 190, 205, 155, 180, 190)

# 检查数据类型
typeof(heights)
## [1] "double"

# 显式定义整数向量
heights_int <- c(175L, 190L, 205L, 155L, 180L, 190L)

# 检查数据类型
typeof(heights_int)
## [1] "integer"

# 创建一个字符向量
player_names <- c("Michael", 
                  "Scottie", 
                  "Magic", 
                  "Larry", 
                  "Patrick")

# 检查数据类型
typeof(player_names)
## [1] "character"

# 比较操作生成逻辑向量
greater_than_2m <- heights > 200

# 查看逻辑向量内容
greater_than_2m
## [1] FALSE FALSE TRUE FALSE FALSE FALSE

# 检查数据类型
typeof(greater_than_2m)
## [1] "logical"

```

## 类型转换

在 R 中，**向量的所有元素必须具有相同的数据类型**，如果需要同时处理不同的数据类型（例如在函数调用中），R 会尝试进行**类型转换**（type conversion），前提是转换是可能的或合理的。

- **逻辑值（`TRUE/FALSE`）与整数的转换：**
    - 布尔值 `TRUE` 和 `FALSE` 可以转换为整数 `1L` 和 `0L`。
    - 例：`TRUE` -> `1L`，`FALSE` -> `0L`。
    - **注意：** 并非所有整数都可以转换为布尔值。例如，向量 `c(1L, 2L, 3L)` 无法直接转换为逻辑值。
- **整数（`integer`）与浮点数（`double`）的转换：**
    - 整数可以表示为浮点数（例如，`1L` 可以表示为 `1.0`）。
    - **注意：** 并非所有浮点数都可以转换为整数。例如，`1.1` 无法转换为整数。
- **布尔值、整数、浮点数与字符类型的转换：**
    - 布尔值、整数和浮点数可以转换为字符类型。
    - 例：`TRUE` -> `"TRUE"`，`1L` -> `"1"`，`1.5` -> `"1.5"`。
    - **注意：** 反向转换（即字符类型转换为其他类型）并不总是可行。例如，`"hello"` 无法转换为布尔值、整数或浮点数。

- **向量的统一性：** 向量中的所有元素必须具有相同的数据类型。
- **自动类型转换：** 当不同类型数据混合使用时，R 会尝试进行类型提升（例如，**布尔值 -> 整数 -> 浮点数 -> 字符**）。
- **手动类型转换：** 可以使用 `as.integer()`、`as.double()`、`as.character()` 等函数进行显式类型转换，但需注意转换限制。

```
# 布尔值转换为整数
as.integer(TRUE)
## [1] 1
as.integer(FALSE)
## [1] 0

# 整数转换为浮点数
as.double(1L)
## [1] 1

# 浮点数转换为整数（只能在没有小数时转换）
as.integer(1.0)
## [1] 1
as.integer(1.1)
## Warning: NAs introduced by coercion
## [1] NA

# 布尔值、整数和浮点数转换为字符
as.character(TRUE)
## [1] "TRUE"
as.character(1L)
## [1] "1"
as.character(1.5)
## [1] "1.5"

# 字符转换为其他类型（仅在字符表示合法时可行）
as.numeric("1.5")
## [1] 1.5
as.integer("1")
## [1] 1
as.logical("TRUE")
## [1] TRUE
as.numeric("hello")
## Warning: NAs introduced by coercion
## [1] NA
```

```
x <- c(1L, 10L)
typeof(x)
## [1] "integer"

x <- c(1L, 10L, 2.3)
typeof(x)
## [1] "double"

x <- c(1L, 10L, 2.3, "Michael")
x
## [1] "1"       "10"      "2.3"     "Michael"

# 数字被加上引号，说明它们被转换为字符
typeof(x)
## [1] "character"

x1 <- c(TRUE, FALSE) + 1  # TRUE -> 1.0, FALSE -> 0.0, 然后加上 1.0
x1
## [1] 2 1

typeof(x1)
## [1] "double"
```
