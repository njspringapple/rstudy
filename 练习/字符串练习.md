
# R语言基础字符串操作实战练习（20题）

以下练习题围绕具体应用场景设计，每题都包含数据准备和明确的任务目标，要求学生使用R基础字符串函数编写解决方案。

## 1. 客户姓名标准化

**场景**：你在一家电商公司的客服部门工作，收到了一份客户数据，但姓名格式不统一。

**数据准备**：

```r
customer_names <- c("JOHN SMITH", "mary jones", "David Wilson", "  Susan  Brown  ", "johnson,robert", "Lee,Ming-Hui")
```

**任务**：编写代码将所有姓名格式标准化为"名 姓"格式，首字母大写其余小写。

## 2. 电话号码格式化

**场景**：市场部门收集了一批潜在客户的电话号码，但格式各异，需要统一为标准格式。

**数据准备**：

```r
phone_numbers <- c("1234567890", "(123) 456-7890", "123-456-7890", "123 456 7890", "123.456.7890")
```

**任务**：将所有号码转换为统一格式"(XXX) XXX-XXXX"。

## 3. 电子邮件提取

**场景**：从公司网站收集的用户反馈包含了联系信息，需要提取有效的电子邮件地址。

**数据准备**：

```r
feedback_texts <- c(
  "My name is John (john.doe@example.com) and I found a bug.",
  "Please contact me at: smith_jane123@company.co.uk when fixed",
  "No issues so far, thanks! - admin@site.org",
  "Contact info: phone 555-1234, no email provided",
  "Multiple contacts: primary@example.com or secondary@example.com"
)
```

**任务**：从每条反馈中提取所有电子邮件地址，创建一个有效的联系人列表。

## 4. 产品代码解析

**场景**：你的公司使用特定格式的产品代码，需要解析这些代码获取产品信息。

**数据准备**：

```r
product_codes <- c("EL-2021-5467-01", "FN-2020-1234-05", "AC-2022-9876-10", "HW-2021-3333-02")
```

**任务**：编写函数解析产品代码，提取产品类别（前两个字母）、年份、序列号和版本号，生成一个数据框。

## 5. 地址标准化

**场景**：营销部门需要清理地址数据库，移除多余空格并标准化州/省份缩写。

**数据准备**：

```r
addresses <- c(
  "123  Main  St.,  new york,  ny  10001",
  "456 Oak Avenue, Los Angeles CA 90001",
  "789 Pine Rd, Chicago,  IL60007",
  "101 River Blvd,New Orleans, la, 70112"
)
```

**任务**：标准化地址格式，确保适当的空格、逗号，并将州名转换为大写的两字母缩写。

## 6. 日志文件解析

**场景**：你需要分析服务器日志文件，提取重要信息。

**数据准备**：

```r
log_entries <- c(
  "[ERROR 2023-03-15 08:23:45] Connection timeout for user ID: USER_123",
  "[INFO 2023-03-15 08:25:12] Login successful for user ID: USER_456",
  "[WARNING 2023-03-15 08:30:59] High memory usage detected: 85%",
  "[ERROR 2023-03-15 09:15:27] Database connection failed, retry attempt: 3"
)
```

**任务**：编写代码从日志条目中提取日期、时间、日志级别（ERROR、INFO、WARNING）和消息内容。

## 7. CSV数据清洗

**场景**：你收到了一个CSV导出的文件，但数据包含引号和多余空格，需要清理。

**数据准备**：

```r
csv_lines <- c(
  "\"ProductID\",\"Product Name\",\"Price\",\"Stock\"",
  "\"001\",\"Laptop Dell XPS 13\",\"1299.99\",\"15\"",
  "\"002\",\"   Wireless Mouse   \",\"25.50\",\"100\"",
  "\"003\",\"Keyboard, Mechanical\",\"89.95\",\"30\"",
  "\"004\",\"Monitor \"\"24 inch\"\"\",\"199.99\",\"10\""
)
```

**任务**：清理CSV数据，去除不必要的引号和空格，并解析为一个干净的数据框。

## 8. 用户输入验证

**场景**：开发一个注册表单，需要验证用户输入的用户名是否符合要求。

**数据准备**：

```r
usernames <- c(
  "john_doe123", "user@name", "admin123",
  "超级用户", "user.name", "short", 
  "AVeryLongUsernameThatExceedsTheMaximumLength"
)
```

**任务**：编写函数验证用户名是否符合以下条件：只包含字母、数字、下划线；长度在8到20个字符之间；不能是保留名称（如"admin"、"root"）。

## 9. 文件名批量重命名

**场景**：你有一批数据文件，命名不规范，需要批量重命名为一致的格式。

**数据准备**：

```r
filenames <- c(
  "data_file(2023)_v1.csv",
  "results 2023-01.csv",
  "analysis_final_2023_02.csv",
  "experiment#3(2023-03).csv",
  "survey_results_2023_apr.CSV"
)
```

**任务**：将所有文件名标准化为"dataset_YYYY_MM_序号.csv"的格式。

## 10. 文本摘要提取

**场景**：你需要处理一批文章，提取每篇文章的前50个字符作为摘要。

**数据准备**：

```r
articles <- c(
  "人工智能(AI)正在迅速改变我们的世界。从自动驾驶汽车到医疗诊断，AI的应用无处不在。研究人员正在开发更先进的算法...",
  "气候变化是当今世界面临的最大挑战之一。全球温度上升导致极端天气事件增加、海平面上升和生物多样性丧失...",
  "太空探索进入新时代，商业公司如SpaceX和Blue Origin正与传统航天机构竞争，降低了进入太空的成本...",
  "疫情后的全球经济正在经历转型，远程工作成为常态，数字经济加速发展，但也加剧了某些不平等现象..."
)
```

**任务**：从每篇文章中提取摘要，确保不会截断词语，并在摘要末尾添加"..."。

## 11. 社交媒体文本分析

**场景**：分析社交媒体帖子，提取所有提及的主题标签（hashtags）。

**数据准备**：

```r
social_posts <- c(
  "喜欢这部新电影! #电影 #周末 #娱乐",
  "刚完成了10公里跑步 #健康生活 #跑步 #健身目标2023",
  "分享一个烹饪技巧 #美食 #烹饪 #家常菜",
  "今天没有特别的事情 只是普通的一天",
  "新项目终于启动啦! #工作 #科技 #编程 #激动"
)
```

**任务**：提取所有帖子中的主题标签，统计最常见的标签。

## 12. 引用格式化

**场景**：你在准备一篇学术论文，需要将参考文献格式化为一致的引用格式。

**数据准备**：

```r
references <- c(
  "Smith, J., & Johnson, A. (2020). Machine Learning Fundamentals. Journal of AI Research, 15(2), 123-145.",
  "WILLIAMS, ROBERT (2019): \"Data Analysis Methods\", Statistics Review, Vol. 8, p. 45-67",
  "Brown, Mary E; Davis, Thomas R., 2021, \"Cloud Computing Security\", International Journal of Cybersecurity, 10(4):78-96",
  "Lee, Sarah. Quantum Computing Basics. Tech Publications, 2022."
)
```

**任务**：将所有引用转换为APA格式（作者年份格式）。

## 13. 商品描述清理

**场景**：电商产品描述中含有HTML标签和多余符号，需要清理以便显示。

**数据准备**：

```r
product_descriptions <- c(
  "<p>高性能笔记本电脑</p><ul><li>处理器: Intel i7</li><li>内存: 16GB</li><li>硬盘: 512GB SSD</li></ul>",
  "智能手表 - <b>防水设计</b> - 心率监测 - 长达7天续航!!",
  "<div>无线耳机 &quot;音质出色&quot; &amp; 低延迟 *** 限时特价 ***</div>",
  "【新款】家用空气净化器 (去除99.9%细菌) ##热销产品##"
)
```

**任务**：移除所有HTML标签和特殊符号，保留纯文本描述。

## 14. 时间格式转换

**场景**：你的应用需要处理来自不同国家的时间格式，转换为标准24小时制。

**数据准备**：

```r
time_strings <- c(
  "9:30 AM", "2:45 PM", "14:20", "8:05 am",
  "11:00 PM", "00:30", "5:15 pm", "13:45"
)
```

**任务**：编写函数将所有时间转换为24小时制格式（HH:MM）。

## 15. 字符串加密解密

**场景**：你需要实现一个简单的字符替换加密算法，用于非敏感数据的模糊处理。

**数据准备**：

```r
sensitive_data <- c(
  "Password: abc123",
  "User ID: johnsmith",
  "Access Code: XYZ-789",
  "PIN: 9876"
)
```

**任务**：实现一个简单的字符替换加密解密函数，可以相互转换。

## 16. 病历信息提取

**场景**：医疗记录系统需要从病历文本中提取关键信息。

**数据准备**：

```r
medical_records <- c(
  "患者：张三，年龄：45岁，性别：男，诊断：高血压，用药：硝苯地平，剂量：10mg，每日两次",
  "患者：李四，女，32岁，诊断：糖尿病II型，用药：二甲双胍，每日500mg，三次",
  "王五（男/67岁），确诊为冠心病，服用阿司匹林（81mg 每日一次）和他汀类药物",
  "患者信息：赵六 女性 29岁，妊娠28周，无并发症，维生素补充剂每日一次"
)
```

**任务**：从病历文本中提取患者姓名、年龄、性别和诊断信息，创建结构化数据框。

## 17. 数据报告生成

**场景**：你需要从销售数据自动生成月度报告文本。

**数据准备**：

```r
sales_data <- data.frame(
  month = c("January", "February", "March", "April"),
  revenue = c(125000, 118000, 143000, 159000),
  units_sold = c(1250, 1180, 1430, 1590),
  top_product = c("Laptop", "Monitor", "Printer", "Laptop")
)
```

**任务**：为每个月创建一个销售报告摘要，格式为："[月份]销售报告：销售额[金额]元，售出[数量]件商品，最畅销产品：[产品名]。与上月相比[增长/下降][百分比]%。"

## 18. 课程代码解析

**场景**：大学课程管理系统需要解析课程代码，提取学科、级别和节次信息。

**数据准备**：

```r
course_codes <- c(
  "COMP-101-A: 计算机导论",
  "MATH-201-B: 高级微积分",
  "PHYS-301-C: 量子力学",
  "BIOL-110-A: 基础生物学",
  "CHEM-250-D: 有机化学"
)
```

**任务**：解析课程代码，创建包含学科（COMP、MATH等）、课程级别（100-400）和班次（A-D）的数据框。

## 19. 代码注释提取

**场景**：软件文档生成工具需要从代码文件中提取函数和注释。

**数据准备**：

```r
code_snippets <- c(
  "# 计算两个数的总和\nsum_numbers <- function(a, b) {\n  return(a + b)\n}",
  "# 检查数字是否为偶数\n# 返回TRUE或FALSE\nis_even <- function(x) {\n  return(x %% 2 == 0)\n}",
  "# 计算列表的平均值\nmean_value <- function(numbers) {\n  # 忽略NA值\n  return(mean(numbers, na.rm = TRUE))\n}",
  "# 将华氏温度转换为摄氏温度\nfahr_to_celsius <- function(temp_f) {\n  temp_c <- (temp_f - 32) * 5/9\n  return(temp_c)\n}"
)
```

**任务**：提取每个函数的名称和相关注释，生成简单的函数文档。

## 20. 多语言文本处理

**场景**：国际化应用需要处理多语言文本，确保正确显示和处理各种语言字符。

**数据准备**：

```r
multilingual_texts <- c(
  "English: Hello World!",
  "中文: 你好，世界！",
  "Español: ¡Hola Mundo!",
  "Русский: Привет, мир!",
  "日本語: こんにちは世界！",
  "العربية: مرحبا بالعالم!"
)
```

**任务**：编写函数(1)检测文本语言；(2)提取文本内容；(3)计算实际字符数（考虑到非ASCII字符）；(4)创建一个排版友好的多语言显示格式。

## 提交要求

1. 每个练习需要提交完整的R代码解决方案
2. 代码应简洁高效，包含适当的注释说明
3. 对于复杂问题，说明您的思路和处理步骤
4. 提交代码和结果输出
5. 讨论您的解决方案可能的改进点或限制

这套练习题涵盖了数据清理、信息提取、文本标准化和格式转换等真实应用场景，通过完成这些练习，学生将能够熟练运用R基础字符串处理函数解决实际问题。