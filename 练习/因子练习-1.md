
## 一、基础操作 (每题5分，共25分)

1. 创建一个因子：将以下向量转换为因子，并打印结果。

```r
colors <- c("红", "蓝", "绿", "红", "蓝", "黄", "绿")
# 请完成代码
```

1. 检查因子属性：对以下代码运行结果进行分析。

```r
animals <- factor(c("猫", "狗", "鱼", "鸟", "猫", "狗"))
# 请完成下列代码并解释每行输出的含义
class(animals)
levels(animals)
as.numeric(animals)
length(animals)
```

1. 指定因子水平：创建一个包含星期几的因子，确保水平按正确顺序排列。

```r
days <- c("周二", "周一", "周三", "周五", "周四")
# 请完成代码，确保水平顺序为：周一、周二、周三、周四、周五
```

1. 更改因子水平：

```r
grades <- factor(c("A", "B", "C", "B", "A", "D"))
# 将水平更改为 D, C, B, A 的顺序
```

1. 计数和频率：使用适当的函数计算以下因子的频率分布。

```r
blood_types <- factor(c("A", "B", "O", "AB", "A", "O", "O", "B", "A"))
# 请完成代码统计每种血型的数量
```

## 二、进阶操作 (每题7分，共35分)

1. 因子转换：

```r
# 将下面的因子转换为字符向量，然后再转换为数值向量(注意观察结果)
f1 <- factor(c("100", "200", "300"))
# 请完成代码
```

1. 添加新水平：

```r
fruits <- factor(c("苹果", "香蕉", "橙子"))
# 请添加一个新水平"葡萄"(但不添加实际数据)，然后再添加一个值为"葡萄"的新观测
```

1. 移除因子水平：

```r
cities <- factor(c("北京", "上海", "广州", "深圳", "北京"))
# 将"上海"从数据中删除，并删除未使用的水平
```

1. 合并因子：

```r
f1 <- factor(c("a", "b", "c"))
f2 <- factor(c("d", "e", "a"))
# 请将这两个因子合并为一个因子
```

1. 有序因子：

```r
education <- c("高中", "本科", "初中", "硕士", "博士", "本科")
# 创建一个有序因子，教育水平从低到高排序
```

## 三、应用实例 (每题10分，共40分)

1. 数据分析中的因子：

```r
# 创建一个包含性别和年龄的数据框，然后：
# 1. 将性别列转换为因子
# 2. 使用table()函数统计性别分布
# 3. 计算每种性别的平均年龄

data <- data.frame(
  gender = c("男", "女", "男", "男", "女", "女", "男"),
  age = c(25, 30, 22, 45, 36, 27, 33)
)
# 请完成代码
```

1. 可视化中的因子：

```r
# 安装并加载ggplot2包(若尚未安装)
# 创建一个数据框并绘制条形图，展示不同部门的人数
# 确保部门在图表中按照人数从高到低排序

departments <- c("市场", "技术", "销售", "人力", "财务", "技术", "销售", 
                "销售", "技术", "技术", "市场", "人力")
# 请完成代码
```

1. 因子在统计模型中的应用：

```r
# 创建一个包含学生成绩和学习方法的数据框
# 将学习方法转换为因子
# 使用boxplot()函数比较不同学习方法下的成绩分布

scores <- data.frame(
  method = c("A方法", "B方法", "C方法", "A方法", "B方法", "C方法", "A方法", 
            "B方法", "C方法", "A方法", "B方法", "C方法"),
  score = c(85, 76, 90, 78, 82, 88, 92, 79, 85, 76, 81, 91)
)
# 请完成代码
```

1. 数据清洗与因子：

```r
# 有一个包含调查数据的数据框，"喜欢"列有多种不同的表达方式
# 将"喜欢"列转换为二元因子(是/否)

survey <- data.frame(
  id = 1:8,
  like = c("Yes", "No", "YES", "yes", "NO", "n", "y", "否")
)
# 请清洗数据并转换为因子，只有两个水平："是"和"否"
```
