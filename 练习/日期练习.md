

## 1. 销售数据日期标准化

**场景**：你收到一份销售数据，但日期格式不一致，需要将其转换为标准格式以便分析。

**数据准备**：

```r
sales_dates <- c("01/15/2023", "2023-02-20", "Mar 10, 2023", "04/05/2023", "2023.05.22", "June 7 2023")
sales_amounts <- c(1200, 1450, 980, 1100, 1350, 1500)
```

**任务**：将所有日期转换为标准的"YYYY-MM-DD"格式，创建一个包含标准化日期和销售金额的数据框。

## 2. 计算订单处理时间

**场景**：电商公司想分析从订单提交到发货的处理时间。

**数据准备**：

```r
order_ids <- c("ORD-001", "ORD-002", "ORD-003", "ORD-004", "ORD-005")
order_dates <- c("2023-03-15 08:30:00", "2023-03-15 12:45:00", "2023-03-16 09:20:00", "2023-03-17 14:30:00", "2023-03-18 10:15:00")
shipping_dates <- c("2023-03-16 10:15:00", "2023-03-15 17:30:00", "2023-03-18 11:45:00", "2023-03-17 16:00:00", "2023-03-20 09:30:00")
```

**任务**：计算每个订单从提交到发货所需的小时数，并确定哪些订单的处理时间超过24小时。

## 3. 生成月度报表日期

**场景**：财务部门需要生成过去12个月的月度报表，报表日期为每月最后一天。

**数据准备**：

```r
current_date <- as.Date("2023-06-15")  # 假设今天是2023年6月15日
```

**任务**：生成过去12个月的月末日期列表，并以"YYYY年MM月"的格式显示月份名称。

## 4. 工作日计算

**场景**：项目经理需要计算一个项目的工作日数量，不包括周末。

**数据准备**：

```r
project_start <- as.Date("2023-04-10")  # 项目开始日期
project_end <- as.Date("2023-05-26")    # 项目结束日期
holidays <- as.Date(c("2023-05-01", "2023-05-22"))  # 法定假日
```

**任务**：计算项目期间的工作日天数（不包括周末和法定假日）。

## 5. 日期分组和统计

**场景**：分析网站访问日志，按周和月统计访问量。

**数据准备**：

```r
visit_dates <- as.Date(c(
  "2023-01-05", "2023-01-08", "2023-01-12", "2023-01-15", "2023-01-20", 
  "2023-01-25", "2023-01-28", "2023-02-03", "2023-02-08", "2023-02-12", 
  "2023-02-15", "2023-02-20", "2023-02-25", "2023-03-02", "2023-03-07", 
  "2023-03-12", "2023-03-18", "2023-03-22", "2023-03-26", "2023-03-30"
))
visit_counts <- c(120, 145, 168, 132, 197, 205, 173, 188, 210, 195, 223, 240, 218, 235, 267, 244, 290, 307, 285, 320)
```

**任务**：将访问数据按周和月进行分组，计算每周和每月的总访问量和平均每日访问量。

## 6. 生日日期处理

**场景**：人力资源部门需要处理员工生日数据，以便发送祝福和安排庆祝活动。

**数据准备**：

```r
employees <- data.frame(
  name = c("张三", "李四", "王五", "赵六", "钱七", "孙八"),
  birthday = c("1985-03-12", "1990-07-24", "1978-11-05", "1992-04-18", "1988-07-24", "1995-01-30"),
  department = c("市场", "技术", "财务", "人事", "技术", "市场"),
  stringsAsFactors = FALSE
)
current_date <- as.Date("2023-07-20")  # 假设今天是2023年7月20日
```

**任务**：识别当月过生日的员工，计算每位员工的年龄，并按部门组织生日员工名单。

## 7. 活动日程安排

**场景**：会议组织者需要为期3天的活动创建详细的日程表。

**数据准备**：

```r
event_start_date <- as.Date("2023-09-15")  # 活动开始日期
sessions <- data.frame(
  session_name = c("开幕式", "主题演讲", "工作坊A", "工作坊B", "小组讨论", "专题报告", "闭幕式"),
  day = c(1, 1, 2, 2, 3, 3, 3),  # 第几天
  start_time = c("09:00", "10:30", "09:00", "14:00", "09:30", "13:30", "16:00"),
  duration_mins = c(60, 90, 180, 150, 120, 120, 60),
  stringsAsFactors = FALSE
)
```

**任务**：生成完整的活动日程表，包含每个环节的日期、开始时间和结束时间。

## 8. 定期维护计划生成

**场景**：设备维护团队需要生成未来6个月的定期维护计划。

**数据准备**：

```r
equipment <- data.frame(
  id = c("EQ-001", "EQ-002", "EQ-003", "EQ-004"),
  name = c("服务器A", "服务器B", "网络设备", "存储系统"),
  last_maintenance = c("2023-05-15", "2023-06-20", "2023-04-10", "2023-06-05"),
  maintenance_interval_days = c(30, 45, 60, 90),
  stringsAsFactors = FALSE
)
current_date <- as.Date("2023-07-01")  # 计划起始日期
```

**任务**：根据上次维护日期和维护间隔，生成未来6个月的维护计划，包括设备信息和计划维护日期。

## 9. 日期序列生成和筛选

**场景**：数据分析师需要生成日期序列用于时间序列分析。

**数据准备**：

```r
start_date <- as.Date("2023-01-01")
end_date <- as.Date("2023-12-31")
```

**任务**：生成2023年全年的日期序列，然后筛选出所有周一和月末日期，存储为两个单独的向量。

## 10. 日期差异分析

**场景**：客户服务团队想分析服务请求的响应时间。

**数据准备**：

```r
service_requests <- data.frame(
  request_id = c("SR-001", "SR-002", "SR-003", "SR-004", "SR-005"),
  submit_date = c("2023-04-05 09:30:00", "2023-04-06 14:20:00", "2023-04-08 11:15:00", "2023-04-10 16:40:00", "2023-04-12 10:05:00"),
  response_date = c("2023-04-05 15:45:00", "2023-04-07 10:30:00", "2023-04-08 13:25:00", "2023-04-12 09:10:00", "2023-04-12 14:30:00"),
  priority = c("高", "中", "低", "高", "中"),
  stringsAsFactors = FALSE
)
```

**任务**：计算每个服务请求的响应时间（小时），分析不同优先级请求的平均响应时间，并找出响应时间超过24小时的请求。

## 11. 日期时间戳解析

**场景**：数据工程师从系统日志中提取了时间戳数据，需要解析为标准格式。

**数据准备**：

```r
timestamps <- c(
  "20230415083022", "20230416142536", "20230417065512", 
  "20230418113045", "20230419092530", "20230420151822"
)
```

**任务**：将紧凑格式的时间戳（YYYYMMDDHHMMSS）解析为人类可读的日期时间格式（"YYYY-MM-DD HH:MM:SS"）。

## 12. 跨时区时间转换

**场景**：国际会议组织者需要为不同时区的参与者提供会议时间。

**数据准备**：

```r
meeting_time_utc <- as.POSIXct("2023-08-15 14:00:00", tz = "UTC")
time_zones <- c("America/New_York", "Europe/London", "Asia/Tokyo", "Australia/Sydney", "Asia/Shanghai")
```

**任务**：将UTC时间转换为每个目标时区的本地时间，创建一个显示所有时区会议时间的表格。

## 13. 季度报表日期

**场景**：财务分析师需要生成过去4个季度的报表日期范围。

**数据准备**：

```r
current_date <- as.Date("2023-05-15")  # 假设当前日期
```

**任务**：计算过去4个完整季度的起始和结束日期，并以"YYYY年Q季度"格式显示季度标识。

## 14. 年龄计算和分组

**场景**：市场研究团队需要分析客户年龄分布。

**数据准备**：

```r
customers <- data.frame(
  id = c(1:10),
  birth_date = c(
    "1992-05-15", "1985-11-23", "1998-02-10", "1976-08-30", "2001-04-12",
    "1989-07-07", "1995-01-19", "1980-12-03", "2003-09-21", "1968-06-28"
  ),
  stringsAsFactors = FALSE
)
reference_date <- as.Date("2023-06-30")  # 计算年龄的参考日期
```

**任务**：计算每位客户的精确年龄（考虑月和日），然后按年龄段分组（例如：18-25，26-35，36-45，46+）。

## 15. 历史数据填充

**场景**：你有一个不完整的销售数据集，需要为缺失的日期填充数据。

**数据准备**：

```r
sales_data <- data.frame(
  date = as.Date(c("2023-01-01", "2023-01-03", "2023-01-05", "2023-01-08", "2023-01-10", "2023-01-12", "2023-01-15")),
  sales = c(1200, 950, 1300, 1450, 1100, 1250, 1400)
)
```

**任务**：创建一个完整的日期序列（2023-01-01至2023-01-15），并通过线性插值为缺失的日期填充销售数据。

## 16. 自然语言日期描述

**场景**：为用户友好界面生成日期的自然语言描述。

**数据准备**：

```r
dates <- as.Date(c("2023-07-24", "2023-07-25", "2023-07-30", "2023-08-01", "2023-08-15", "2023-09-01"))
current_date <- as.Date("2023-07-25")  # 假设今天是2023年7月25日
```

**任务**：为每个日期生成用户友好的描述，如"今天"、"昨天"、"5天后"、"上个月"等，考虑与当前日期的关系。

## 17. 工作进度跟踪

**场景**：项目经理需要跟踪项目的时间进度和完成情况。

**数据准备**：

```r
project <- list(
  name = "系统更新项目",
  start_date = as.Date("2023-05-01"),
  end_date = as.Date("2023-08-31"),
  milestones = data.frame(
    milestone = c("需求分析", "设计阶段", "开发阶段", "测试阶段", "部署上线"),
    planned_date = as.Date(c("2023-05-15", "2023-06-10", "2023-07-20", "2023-08-15", "2023-08-30")),
    actual_date = as.Date(c("2023-05-18", "2023-06-15", "2023-07-25", NA, NA)),
    stringsAsFactors = FALSE
  )
)
current_date <- as.Date("2023-07-30")  # 假设当前日期
```

**任务**：计算项目的总天数、已经过的天数、剩余天数，完成百分比，以及各里程碑的计划与实际日期偏差。

## 18. 日历月视图生成

**场景**：开发一个简单的文本日历生成器。

**数据准备**：

```r
year <- 2023
month <- 8  # 生成2023年8月的日历
events <- data.frame(
  date = as.Date(c("2023-08-05", "2023-08-12", "2023-08-15", "2023-08-20", "2023-08-25")),
  event = c("团队建设", "客户会议", "项目截止日期", "培训日", "月度回顾"),
  stringsAsFactors = FALSE
)
```

**任务**：生成指定月份的文本日历，显示日期和星期几，并标记出事件日期。

## 19. 周期性日期模式识别

**场景**：数据分析师需要识别销售数据中的周期性模式。

**数据准备**：

```r
daily_sales <- data.frame(
  date = seq(as.Date("2023-01-01"), as.Date("2023-03-31"), by = "day"),
  amount = runif(90, 500, 2000)  # 随机生成90天的销售数据
)
# 为周末增加销售额，模拟周末销售高峰
weekend_indices <- which(weekdays(daily_sales$date) %in% c("星期六", "星期日") | 
                         weekdays(daily_sales$date) %in% c("Saturday", "Sunday"))
daily_sales$amount[weekend_indices] <- daily_sales$amount[weekend_indices] * 1.5
# 每月1日销售额低
month_start_indices <- which(format(daily_sales$date, "%d") == "01")
daily_sales$amount[month_start_indices] <- daily_sales$amount[month_start_indices] * 0.7
```

**任务**：分析销售数据，识别按星期几和月份日期的销售模式，计算每个星期几的平均销售额，以及月初、月中和月末的销售表现。

## 20. 自定义日期格式转换

**场景**：数据导入导出需要处理各种自定义日期格式。

**数据准备**：

```r
custom_dates <- c(
  "2023年7月15日", "15/Jul/2023", "07-15-2023",
  "2023.07.15", "15-JUL-23", "20230715"
)
```

**任务**：编写一个函数，能够识别并解析各种日期格式，将其转换为标准的R日期对象，然后以"YYYY-MM-DD"格式输出。函数应具有足够的健壮性来处理各种常见的日期表示方法。

